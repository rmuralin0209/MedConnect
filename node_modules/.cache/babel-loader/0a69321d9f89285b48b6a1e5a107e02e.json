{"ast":null,"code":"import firebase from '../config/firebase';\nconst db = firebase.firestore();\n\nconst update_user = () => {\n  return dispatch => {\n    firebase.auth().onAuthStateChanged(user => {\n      if (user) {\n        // User is signed in.\n        // console.log(\"update_user =>>\", user.uid)\n        db.collection('users').doc(user.uid).get().then(snapshot => {\n          // console.log(\"snapshot.data =>>\", snapshot.data());\n          dispatch({\n            type: 'SET_USER',\n            user: { ...snapshot.data(),\n              isLogin: true\n            }\n          });\n        });\n      } else {// No user is signed in.\n      }\n    });\n  };\n};\n\nconst remove_user = () => {\n  return dispatch => {\n    firebase.auth().signOut().then(() => {\n      // Sign-out successful.\n      console.log(\"Successfully log out\");\n      dispatch({\n        type: 'REMOVE_USER',\n        user: {\n          isLogin: false\n        }\n      });\n    }).catch(error => {\n      // An error happened.\n      let errorMessage = error.message;\n      console.log(\"Log Out Error Message => \", errorMessage);\n    });\n  };\n};\n\nconst helper_list = () => {\n  return dispatch => {\n    db.collection('users').onSnapshot(snapshot => {\n      const helperList = [];\n      snapshot.forEach(doc => {\n        if (doc.data().isHelper) {\n          const obj = {\n            id: doc.id,\n            ...doc.data()\n          };\n          helperList.push(obj);\n        }\n      }); // console.log('Helper List', helperList);\n\n      dispatch({\n        type: 'HELPER_LIST',\n        helperList: helperList\n      });\n    });\n  };\n};\n\nconst order_request = () => {\n  return dispatch => {\n    firebase.auth().onAuthStateChanged(user => {\n      if (user) {\n        // console.log(\"user uid => \", user.uid)\n        db.collection('users').doc(user.uid).collection(\"orderRequest\").onSnapshot(snapshot => {\n          const orderRequest = [];\n          snapshot.forEach(doc => {\n            const obj = {\n              id: doc.id,\n              ...doc.data()\n            }; // console.log(\"Order Request From Action => \", obj)\n\n            orderRequest.push(obj);\n          });\n          dispatch({\n            type: 'ORDER_REQUEST',\n            orderRequest: orderRequest\n          });\n        });\n      }\n    });\n  };\n};\n\nconst my_order = () => {\n  return dispatch => {\n    firebase.auth().onAuthStateChanged(user => {\n      if (user) {\n        // console.log(\"user uid => \", user.uid)\n        db.collection('users').doc(user.uid).collection(\"myOrder\").onSnapshot(snapshot => {\n          const myOrder = [];\n          snapshot.forEach(doc => {\n            const obj = {\n              id: doc.id,\n              ...doc.data()\n            }; // console.log(\"Order Request From Action => \", obj)\n\n            myOrder.push(obj);\n          });\n          dispatch({\n            type: 'MY_ORDER',\n            myOrder: myOrder\n          });\n        });\n      }\n    });\n  };\n};\n\nconst my_foods = () => {\n  return dispatch => {\n    firebase.auth().onAuthStateChanged(user => {\n      if (user) {\n        // console.log(\"user uid => \", user.uid)\n        db.collection('users').doc(user.uid).collection(\"menuItems\").onSnapshot(snapshot => {\n          const myFoods = [];\n          snapshot.forEach(doc => {\n            const obj = {\n              id: doc.id,\n              ...doc.data()\n            }; // console.log(\"Order Request From Action => \", obj)\n\n            myFoods.push(obj);\n          });\n          dispatch({\n            type: 'MY_FOODS',\n            myFoods: myFoods\n          });\n        });\n      }\n    });\n  };\n};\n\nexport { update_user, remove_user, helper_list, order_request, my_order, my_foods };","map":{"version":3,"sources":["/Users/rachanamn/Documents/Internship/medhacks2020/MedConnect/src/store/action.js"],"names":["firebase","db","firestore","update_user","dispatch","auth","onAuthStateChanged","user","collection","doc","uid","get","then","snapshot","type","data","isLogin","remove_user","signOut","console","log","catch","error","errorMessage","message","helper_list","onSnapshot","helperList","forEach","isHelper","obj","id","push","order_request","orderRequest","my_order","myOrder","my_foods","myFoods"],"mappings":"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","sourcesContent":["import firebase from '../config/firebase';\nconst db = firebase.firestore();\n\nconst update_user = () => {\n    return (dispatch) => {\n        firebase.auth().onAuthStateChanged((user) => {\n            if (user) {\n                // User is signed in.\n                // console.log(\"update_user =>>\", user.uid)\n                db.collection('users').doc(user.uid).get().then((snapshot) => {\n                    // console.log(\"snapshot.data =>>\", snapshot.data());\n                    dispatch({\n                        type: 'SET_USER',\n                        user: { ...snapshot.data(), isLogin: true }\n                    })\n                })\n            } else {\n                // No user is signed in.\n            }\n\n        });\n    }\n}\n\nconst remove_user = () => {\n    return (dispatch) => {\n        firebase.auth().signOut().then(() => {\n            // Sign-out successful.\n            console.log(\"Successfully log out\");\n            dispatch({\n                type: 'REMOVE_USER',\n                user: { isLogin: false }\n            })\n        }).catch((error) => {\n            // An error happened.\n            let errorMessage = error.message;\n            console.log(\"Log Out Error Message => \", errorMessage);\n        });\n    }\n}\n\nconst helper_list = () => {\n    return (dispatch) => {\n        db.collection('users').onSnapshot(snapshot => {\n            const helperList = [];\n            snapshot.forEach(doc => {\n                if (doc.data().isHelper) {\n                    const obj = { id: doc.id, ...doc.data() }\n                    helperList.push(obj);\n                }\n            })\n            // console.log('Helper List', helperList);\n            dispatch({\n                type: 'HELPER_LIST',\n                helperList: helperList,\n            })\n        })\n    }\n}\n\nconst order_request = () => {\n    return (dispatch) => {\n        firebase.auth().onAuthStateChanged((user) => {\n            if (user) {\n                // console.log(\"user uid => \", user.uid)\n                db.collection('users').doc(user.uid).collection(\"orderRequest\").onSnapshot(snapshot => {\n                    const orderRequest = [];\n                    snapshot.forEach(doc => {\n                        const obj = { id: doc.id, ...doc.data() }\n                        // console.log(\"Order Request From Action => \", obj)\n                        orderRequest.push(obj)\n                    })\n                    dispatch({\n                        type: 'ORDER_REQUEST',\n                        orderRequest: orderRequest,\n                    })\n                })\n            }\n        });\n    }\n}\n\nconst my_order = () => {\n    return (dispatch) => {\n        firebase.auth().onAuthStateChanged((user) => {\n            if (user) {\n                // console.log(\"user uid => \", user.uid)\n                db.collection('users').doc(user.uid).collection(\"myOrder\").onSnapshot(snapshot => {\n                    const myOrder = [];\n                    snapshot.forEach(doc => {\n                        const obj = { id: doc.id, ...doc.data() }\n                        // console.log(\"Order Request From Action => \", obj)\n                        myOrder.push(obj)\n                    })\n                    dispatch({\n                        type: 'MY_ORDER',\n                        myOrder: myOrder,\n                    })\n                })\n            }\n        });\n    }\n}\n\nconst my_foods = () => {\n    return (dispatch) => {\n        firebase.auth().onAuthStateChanged((user) => {\n            if (user) {\n                // console.log(\"user uid => \", user.uid)\n                db.collection('users').doc(user.uid).collection(\"menuItems\").onSnapshot(snapshot => {\n                    const myFoods = [];\n                    snapshot.forEach(doc => {\n                        const obj = { id: doc.id, ...doc.data() }\n                        // console.log(\"Order Request From Action => \", obj)\n                        myFoods.push(obj)\n                    })\n                    dispatch({\n                        type: 'MY_FOODS',\n                        myFoods: myFoods,\n                    })\n                })\n            }\n        });\n    }\n}\n\n\nexport {\n    update_user,\n    remove_user,\n    helper_list,\n    order_request,\n    my_order,\n    my_foods,\n}"]},"metadata":{},"sourceType":"module"}