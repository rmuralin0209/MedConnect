{"ast":null,"code":"import * as firebase from 'firebase';\nimport 'firebase/firestore';\nvar firebaseConfig = {\n  apiKey: \"AIzaSyAwF3vVC0EyminLjle-7tUKZKiYGtW9f3E\",\n  authDomain: \"medconnect-6fdaa.firebaseapp.com\",\n  databaseURL: \"https://medconnect-6fdaa.firebaseio.com\",\n  projectId: \"medconnect-6fdaa\",\n  storageBucket: \"medconnect-6fdaa.appspot.com\",\n  messagingSenderId: \"290600307048\",\n  appId: \"1:290600307048:web:6ef701461cacb76fdb6edd\",\n  measurementId: \"G-DHJ5G4291L\"\n}; // Initialize Firebase\n\nfirebase.initializeApp(firebaseConfig);\nconst db = firebase.firestore(); // TODO Modify for our firebase \n\nfunction signUp(userDetails) {\n  return new Promise((resolve, reject) => {\n    console.log(\"Start 1\");\n    const {\n      userName,\n      userEmail,\n      userPassword,\n      userZip,\n      userAge,\n      userStatus\n    } = userDetails;\n    console.log(\"Start 2\");\n    firebase.auth().createUserWithEmailAndPassword(userDetails.userEmail, userDetails.userPassword).then(success => {\n      console.log(\"Start 3\");\n      let user = firebase.auth().currentUser;\n      var uid;\n\n      if (user != null) {\n        uid = user.uid;\n      }\n\n      ;\n      console.log(\"Start 4\");\n      firebase.storage().ref().child(`Users/${uid}/`).put(uid).then(url => {\n        console.log(\"Start 5\");\n        url.ref.getDownloadURL().then(success => {\n          console.log(\"Start 6\");\n          const userIDUrl = success;\n          console.log(userIDUrl);\n          const userDetailsForDb = {\n            userUid: uid,\n            userName: userName,\n            userEmail: userEmail,\n            userPassword: userPassword,\n            userZip: userZip,\n            userAge: userAge,\n            userStatus: userStatus\n          };\n          db.collection(\"users\").doc(uid).set(userDetailsForDb).then(docRef => {\n            // console.log(\"Document written with ID: \", docRef.id);\n            userDetails.propsHistory.push(\"/\");\n            resolve(userDetailsForDb);\n          }).catch(function (error) {\n            console.error(\"Error adding document: \", error);\n            reject(error);\n          });\n        }).catch(error => {\n          // Handle Errors here.\n          let errorCode = error.code;\n          let errorMessage = error.message;\n          console.log(\"Error in getDownloadURL function\", errorMessage);\n          reject(errorMessage);\n        });\n      }).catch(error => {\n        // Handle Errors here.\n        let errorCode = error.code;\n        let errorMessage = error.message;\n        console.log(\"Error in Image Uploading\", errorMessage);\n        reject(errorMessage);\n      });\n    }).catch(error => {\n      var errorMessage = error.message;\n      console.log(\"Error in Authentication\", errorMessage);\n      reject(errorMessage);\n    });\n  });\n} // Modify for our firebase\n\n\nfunction logIn(userLoginDetails) {\n  return new Promise((resolve, reject) => {\n    const {\n      userLoginEmail,\n      userLoginPassword\n    } = userLoginDetails;\n    firebase.auth().signInWithEmailAndPassword(userLoginEmail, userLoginPassword).then(success => {\n      db.collection('users').doc(success.user.uid).get().then(snapshot => {\n        userLoginDetails.propsHistory.push(\"/home\");\n        resolve(success);\n      });\n    }).catch(error => {\n      // Handle Errors here.\n      // var errorCode = error.code;\n      var errorMessage = error.message;\n      reject(errorMessage);\n    });\n  });\n} // Could use for survey\n\n\nfunction addItem(itemDetails) {\n  const {\n    contactName,\n    contactEmail\n  } = itemDetails;\n  return new Promise((resolve, reject) => {\n    let user = firebase.auth().currentUser;\n    var uid;\n\n    if (user != null) {\n      uid = user.uid;\n    }\n\n    ;\n    firebase.storage().ref().child(`Users/${uid}/`).put(uid).then(url => {\n      url.ref.getDownloadURL().then(success => {\n        const userIDUrl = success;\n        const itemDetailsForDb = {\n          contactName: contactName,\n          contactEmail: contactEmail // userUid: uid,\n\n        };\n        db.collection(\"users\").doc(uid).collection(\"menuItems\").add(itemDetailsForDb).then(docRef => {\n          // console.log(\"Document written with ID: \", docRef.id);\n          // itemDetails.propsHistory.push(\"/my-foods\");\n          resolve(\"Successfully added food item\");\n        }).catch(function (error) {\n          let errorCode = error.code;\n          let errorMessage = error.message;\n          reject(errorMessage); // console.error(\"Error adding document: \", error);\n        });\n      }).catch(error => {\n        // Handle Errors here.\n        let errorCode = error.code;\n        let errorMessage = error.message;\n        console.log(\"Error in getDownloadURL function\", errorCode);\n        console.log(\"Error in getDownloadURL function\", errorMessage);\n        reject(errorMessage);\n      });\n    }).catch(error => {\n      // Handle Errors here.\n      let errorCode = error.code;\n      let errorMessage = error.message;\n      console.log(\"Error in Image Uploading\", errorMessage);\n      reject(errorMessage);\n    });\n  });\n}\n\nfunction orderNow(cartItemsList, totalPrice, resDetails, userDetails, history) {\n  return new Promise((resolve, reject) => {\n    let user = firebase.auth().currentUser;\n    var uid;\n\n    if (user != null) {\n      uid = user.uid;\n    }\n\n    ;\n    const myOrder = {\n      itemsList: cartItemsList,\n      totalPrice: totalPrice,\n      status: \"PENDING\",\n      ...resDetails\n    };\n    const orderRequest = {\n      itemsList: cartItemsList,\n      totalPrice: totalPrice,\n      status: \"PENDING\",\n      ...userDetails\n    }; // console.log(\"myOrder => \", myOrder)\n    // console.log(\"orderRequest => \", orderRequest)\n\n    db.collection(\"users\").doc(uid).collection(\"myOrder\").add(myOrder).then(docRef => {\n      // console.log(docRef.id)\n      db.collection(\"users\").doc(resDetails.id).collection(\"orderRequest\").doc(docRef.id).set(orderRequest).then(docRef => {\n        // console.log(\"Document written with ID: \", docRef.id);\n        resolve('Successfully ordered'); // history.push(\"/my-orders\");\n      }).catch(function (error) {\n        console.error(\"Error adding document: \", error.message);\n        reject(error.message);\n      });\n    }).catch(function (error) {\n      console.error(\"Error adding document: \", error.message);\n      reject(error.message);\n    });\n  });\n}\n\nexport default firebase;\nexport { signUp, logIn, addItem, orderNow };","map":{"version":3,"sources":["/Users/rachanamn/Documents/Internship/medhacks2020/MedConnect/src/config/firebase.js"],"names":["firebase","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","initializeApp","db","firestore","signUp","userDetails","Promise","resolve","reject","console","log","userName","userEmail","userPassword","userZip","userAge","userStatus","auth","createUserWithEmailAndPassword","then","success","user","currentUser","uid","storage","ref","child","put","url","getDownloadURL","userIDUrl","userDetailsForDb","userUid","collection","doc","set","docRef","propsHistory","push","catch","error","errorCode","code","errorMessage","message","logIn","userLoginDetails","userLoginEmail","userLoginPassword","signInWithEmailAndPassword","get","snapshot","addItem","itemDetails","contactName","contactEmail","itemDetailsForDb","add","orderNow","cartItemsList","totalPrice","resDetails","history","myOrder","itemsList","status","orderRequest","id"],"mappings":"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","sourcesContent":["import * as firebase from 'firebase';\nimport 'firebase/firestore'\n\nvar firebaseConfig = {\n    apiKey: \"AIzaSyAwF3vVC0EyminLjle-7tUKZKiYGtW9f3E\",\n    authDomain: \"medconnect-6fdaa.firebaseapp.com\",\n    databaseURL: \"https://medconnect-6fdaa.firebaseio.com\",\n    projectId: \"medconnect-6fdaa\",\n    storageBucket: \"medconnect-6fdaa.appspot.com\",\n    messagingSenderId: \"290600307048\",\n    appId: \"1:290600307048:web:6ef701461cacb76fdb6edd\",\n    measurementId: \"G-DHJ5G4291L\"\n};\n\n// Initialize Firebase\nfirebase.initializeApp(firebaseConfig);\n\nconst db = firebase.firestore();\n\n\n\n// TODO Modify for our firebase \nfunction signUp(userDetails) {\n    return new Promise((resolve, reject) => {\n        console.log(\"Start 1\")\n        const { userName, userEmail, userPassword, userZip, userAge, userStatus } = userDetails;\n        console.log(\"Start 2\")\n        firebase.auth().createUserWithEmailAndPassword(userDetails.userEmail, userDetails.userPassword).then((success) => {\n            console.log(\"Start 3\")\n            let user = firebase.auth().currentUser;\n            var uid;\n            if (user != null) {\n                uid = user.uid;\n            };\n            console.log(\"Start 4\")\n            firebase.storage().ref().child(`Users/${uid}/`).put(uid).then((url) => {\n                console.log(\"Start 5\")\n                url.ref.getDownloadURL().then((success) => {\n                    console.log(\"Start 6\")\n                    const userIDUrl = success\n                    console.log(userIDUrl)\n                    const userDetailsForDb = {\n                        userUid: uid,\n                        userName: userName,\n                        userEmail: userEmail,\n                        userPassword: userPassword,\n                        userZip: userZip,\n                        userAge: userAge,\n                        userStatus: userStatus,\n                    }\n                    db.collection(\"users\").doc(uid).set(userDetailsForDb).then((docRef) => {\n                        // console.log(\"Document written with ID: \", docRef.id);\n                        userDetails.propsHistory.push(\"/\");\n                        resolve(userDetailsForDb)\n\n                    }).catch(function (error) {\n                        console.error(\"Error adding document: \", error);\n                        reject(error)\n                    })\n                }).catch((error) => {\n                    // Handle Errors here.\n                    let errorCode = error.code;\n                    let errorMessage = error.message;\n                    console.log(\"Error in getDownloadURL function\", errorMessage);\n                    reject(errorMessage)\n                })\n            }).catch((error) => {\n                // Handle Errors here.\n                let errorCode = error.code;\n                let errorMessage = error.message;\n                console.log(\"Error in Image Uploading\", errorMessage);\n                reject(errorMessage)\n            })\n        }).catch((error) => {\n            var errorMessage = error.message;\n            console.log(\"Error in Authentication\", errorMessage);\n            reject(errorMessage)\n        })\n    })\n}\n\n// Modify for our firebase\nfunction logIn(userLoginDetails) {\n    return new Promise((resolve, reject) => {\n        const { userLoginEmail, userLoginPassword } = userLoginDetails;\n        firebase.auth().signInWithEmailAndPassword(userLoginEmail, userLoginPassword).then((success) => {\n            db.collection('users').doc(success.user.uid).get().then((snapshot) => {\n                userLoginDetails.propsHistory.push(\"/home\");\n                resolve(success)            \n            })\n        }).catch((error) => {\n            // Handle Errors here.\n            // var errorCode = error.code;\n            var errorMessage = error.message;\n            reject(errorMessage)\n        });\n\n    })\n}\n\n// Could use for survey\nfunction addItem(itemDetails) {\n    const { contactName, contactEmail } = itemDetails;\n    return new Promise((resolve, reject) => {\n        let user = firebase.auth().currentUser;\n        var uid;\n        if (user != null) {\n            uid = user.uid;\n        };\n        firebase.storage().ref().child(`Users/${uid}/`).put(uid).then((url) => {\n            url.ref.getDownloadURL().then((success) => {\n                const userIDUrl = success\n                const itemDetailsForDb = {\n                    contactName : contactName, \n                    contactEmail : contactEmail,\n                    // userUid: uid,\n                }\n                db.collection(\"users\").doc(uid).collection(\"menuItems\").add(itemDetailsForDb).then((docRef) => {\n                    // console.log(\"Document written with ID: \", docRef.id);\n                    // itemDetails.propsHistory.push(\"/my-foods\");\n                    resolve(\"Successfully added food item\")\n                }).catch(function (error) {\n                    let errorCode = error.code;\n                    let errorMessage = error.message;\n                    reject(errorMessage)\n                    // console.error(\"Error adding document: \", error);\n                })\n            }).catch((error) => {\n                // Handle Errors here.\n                let errorCode = error.code;\n                let errorMessage = error.message;\n                console.log(\"Error in getDownloadURL function\", errorCode);\n                console.log(\"Error in getDownloadURL function\", errorMessage);\n                reject(errorMessage)\n            })\n        }).catch((error) => {\n            // Handle Errors here.\n            let errorCode = error.code;\n            let errorMessage = error.message;\n            console.log(\"Error in Image Uploading\", errorMessage);\n            reject(errorMessage)\n        })\n    })\n}\n\nfunction orderNow(cartItemsList, totalPrice, resDetails, userDetails, history) {\n    return new Promise((resolve, reject) => {\n        let user = firebase.auth().currentUser;\n        var uid;\n        if (user != null) {\n            uid = user.uid;\n        };\n\n        const myOrder = {\n            itemsList: cartItemsList,\n            totalPrice: totalPrice,\n            status: \"PENDING\",\n            ...resDetails,\n        }\n\n        const orderRequest = {\n            itemsList: cartItemsList,\n            totalPrice: totalPrice,\n            status: \"PENDING\",\n            ...userDetails,\n        }\n\n        // console.log(\"myOrder => \", myOrder)\n        // console.log(\"orderRequest => \", orderRequest)\n        db.collection(\"users\").doc(uid).collection(\"myOrder\").add(myOrder).then((docRef) => {\n            // console.log(docRef.id)\n            db.collection(\"users\").doc(resDetails.id).collection(\"orderRequest\").doc(docRef.id).set(orderRequest).then((docRef) => {\n                // console.log(\"Document written with ID: \", docRef.id);\n                resolve('Successfully ordered')\n                // history.push(\"/my-orders\");\n            }).catch(function (error) {\n                console.error(\"Error adding document: \", error.message);\n                reject(error.message)\n            })\n        }).catch(function (error) {\n            console.error(\"Error adding document: \", error.message);\n            reject(error.message)\n        })\n    })\n}\n\nexport default firebase;\nexport {\n    signUp,\n    logIn,\n    addItem,\n    orderNow,\n\n\n    // DONE YAYAYAYA\n    // signUp\n    // logIn\n\n\n    // TODO for Rachana\n    // addContact\n    // removeContact\n\n    // Make the survey\n    // submitSurvey\n\n    // Official Covid Test\n    \n\n}"]},"metadata":{},"sourceType":"module"}